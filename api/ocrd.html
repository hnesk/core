
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ocrd package &#8212; pyocrd  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ocrd.cli package" href="ocrd.cli.html" />
    <link rel="prev" title="ocrd" href="modules.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="ocrd-package">
<h1>ocrd package<a class="headerlink" href="#ocrd-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ocrd.cli.html">ocrd.cli package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli.bashlib">ocrd.cli.bashlib module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli.ocrd_tool">ocrd.cli.ocrd_tool module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli.process">ocrd.cli.process module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli.server">ocrd.cli.server module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli.workspace">ocrd.cli.workspace module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli.zip">ocrd.cli.zip module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.cli.html#module-ocrd.cli">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocrd.model.html">ocrd.model package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ocrd.model.yaml.html">ocrd.model.yaml package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ocrd.model.yaml.html#module-ocrd.model.yaml">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_agent">ocrd.model.ocrd_agent module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_exif">ocrd.model.ocrd_exif module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_file">ocrd.model.ocrd_file module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_mets">ocrd.model.ocrd_mets module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_page">ocrd.model.ocrd_page module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_page_generateds">ocrd.model.ocrd_page_generateds module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model.ocrd_xml_base">ocrd.model.ocrd_xml_base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.model.html#module-ocrd.model">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocrd.processor.html">ocrd.processor package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocrd.processor.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.processor.html#module-ocrd.processor.base">ocrd.processor.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.processor.html#module-ocrd.processor">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocrd.validator.html">ocrd.validator package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator.json_validator">ocrd.validator.json_validator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator.ocrd_tool_validator">ocrd.validator.ocrd_tool_validator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator.ocrd_zip_validator">ocrd.validator.ocrd_zip_validator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator.parameter_validator">ocrd.validator.parameter_validator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator.report">ocrd.validator.report module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator.workspace_validator">ocrd.validator.workspace_validator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.validator.html#module-ocrd.validator">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ocrd.webservice.html">ocrd.webservice package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ocrd.webservice.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.webservice.html#module-ocrd.webservice.processor">ocrd.webservice.processor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.webservice.html#module-ocrd.webservice.repository">ocrd.webservice.repository module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ocrd.webservice.html#module-ocrd.webservice">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ocrd.constants">
<span id="ocrd-constants-module"></span><h2>ocrd.constants module<a class="headerlink" href="#module-ocrd.constants" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ocrd.decorators">
<span id="ocrd-decorators-module"></span><h2>ocrd.decorators module<a class="headerlink" href="#module-ocrd.decorators" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="ocrd.decorators.ocrd_cli_options">
<code class="descclassname">ocrd.decorators.</code><code class="descname">ocrd_cli_options</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/decorators.html#ocrd_cli_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.decorators.ocrd_cli_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement MP CLI.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ocrd_click_cli</span> <span class="kn">from</span> <span class="nn">ocrd.utils</span>

<span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="nd">@ocrd_click_cli</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">mets_url</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mets_url</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ocrd.decorators.ocrd_cli_wrap_processor">
<code class="descclassname">ocrd.decorators.</code><code class="descname">ocrd_cli_wrap_processor</code><span class="sig-paren">(</span><em>processorClass</em>, <em>ocrd_tool=None</em>, <em>mets=None</em>, <em>working_dir=None</em>, <em>dump_json=False</em>, <em>version=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/decorators.html#ocrd_cli_wrap_processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.decorators.ocrd_cli_wrap_processor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocrd.decorators.ocrd_loglevel">
<code class="descclassname">ocrd.decorators.</code><code class="descname">ocrd_loglevel</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/decorators.html#ocrd_loglevel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.decorators.ocrd_loglevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an option ‘–log-level’ to set the log level.</p>
</dd></dl>

</div>
<div class="section" id="module-ocrd.logging">
<span id="ocrd-logging-module"></span><h2>ocrd.logging module<a class="headerlink" href="#module-ocrd.logging" title="Permalink to this headline">¶</a></h2>
<p>Logging setup</p>
<p>By default: Log with lastResort logger, usually STDERR.</p>
<p>Logging can be overridden either programmatically in code using the library or by creating one or more of</p>
<ul class="simple">
<li>/etc/ocrd_logging.py</li>
<li>$HOME/ocrd_logging.py</li>
<li>$PWD/ocrd_logging.py</li>
</ul>
<p>These files will be executed in the context of ocrd/ocrd_logging.py, with <cite>logging</cite> global set.</p>
<dl class="function">
<dt id="ocrd.logging.getLogger">
<code class="descclassname">ocrd.logging.</code><code class="descname">getLogger</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/logging.html#getLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.logging.getLogger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocrd.logging.getLevelName">
<code class="descclassname">ocrd.logging.</code><code class="descname">getLevelName</code><span class="sig-paren">(</span><em>lvl</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/logging.html#getLevelName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.logging.getLevelName" title="Permalink to this definition">¶</a></dt>
<dd><p>Get (numerical) python logging level for (string) spec-defined log level name.</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.logging.setOverrideLogLevel">
<code class="descclassname">ocrd.logging.</code><code class="descname">setOverrideLogLevel</code><span class="sig-paren">(</span><em>lvl</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/logging.html#setOverrideLogLevel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.logging.setOverrideLogLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Override all logger filter levels to include lvl and above.</p>
<ul class="simple">
<li>Set root logger level</li>
<li>iterates all existing loggers and sets their log level to <code class="docutils literal notranslate"><span class="pre">NOTSET</span></code>.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>lvl</strong> (<em>string</em>) – Log level name.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ocrd.resolver">
<span id="ocrd-resolver-module"></span><h2>ocrd.resolver module<a class="headerlink" href="#module-ocrd.resolver" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocrd.resolver.Resolver">
<em class="property">class </em><code class="descclassname">ocrd.resolver.</code><code class="descname">Resolver</code><a class="reference internal" href="../_modules/ocrd/resolver.html#Resolver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.resolver.Resolver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handle Uploads, Downloads, Repository access and manage temporary directories</p>
<dl class="method">
<dt id="ocrd.resolver.Resolver.download_to_directory">
<code class="descname">download_to_directory</code><span class="sig-paren">(</span><em>directory</em>, <em>url</em>, <em>basename=None</em>, <em>overwrite=False</em>, <em>subdir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/resolver.html#Resolver.download_to_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.resolver.Resolver.download_to_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a file to the workspace.</p>
<p>Early Shortcut: If url is a <a class="reference external" href="file://-URL">file://-URL</a> and that file is already in the directory, keep it there.</p>
<p>If basename is not given but subdir is, assume user knows what she’s doing and use last URL segment as the basename.
If basename is not given and no subdir is given, use the alnum characters in the URL as the basename.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>directory</strong> (<em>string</em>) – Directory to download files to</li>
<li><strong>basename</strong> (<em>string</em><em>, </em><em>None</em>) – basename part of the filename on disk.</li>
<li><strong>url</strong> (<em>string</em>) – URL to download from</li>
<li><strong>overwrite</strong> (<em>boolean</em>) – Whether to overwrite existing files with that name</li>
<li><strong>subdir</strong> (<em>string</em><em>, </em><em>None</em>) – Subdirectory to create within the directory. Think fileGrp.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Local filename</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocrd.resolver.Resolver.workspace_from_nothing">
<code class="descname">workspace_from_nothing</code><span class="sig-paren">(</span><em>directory</em>, <em>mets_basename='mets.xml'</em>, <em>clobber_mets=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/resolver.html#Resolver.workspace_from_nothing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.resolver.Resolver.workspace_from_nothing" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an empty workspace.</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.resolver.Resolver.workspace_from_url">
<code class="descname">workspace_from_url</code><span class="sig-paren">(</span><em>mets_url</em>, <em>directory=None</em>, <em>clobber_mets=False</em>, <em>mets_basename=None</em>, <em>download=False</em>, <em>download_local=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/resolver.html#Resolver.workspace_from_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.resolver.Resolver.workspace_from_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a workspace from a METS by URL.</p>
<p>Sets the mets.xml file</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocrd.utils">
<span id="ocrd-utils-module"></span><h2>ocrd.utils module<a class="headerlink" href="#module-ocrd.utils" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>xywh_from_points, points_from_xywh, polygon_from_points</li>
</ul>
<p>The functions have the syntax X_from_Y, where X/Y can be</p>
<p>points a string encoding a polygon: “0,0 100,0 100,100, 0,100”
polygon an array of x-y-tuples of a polygon: [[0,0], [100,0], [100,100], [0,100]]
xywh a dict with keys for x, y, width and height: {‘x’: 0, ‘y’: 0, ‘w’: 100, ‘h’: 100}
points is for PAGE</p>
<p>polygon is what opencv2 expects</p>
<p>xywh is what tesserocr expects/produces.</p>
<dl class="function">
<dt id="ocrd.utils.getLogger">
<code class="descclassname">ocrd.utils.</code><code class="descname">getLogger</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/logging.html#getLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.getLogger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocrd.utils.points_from_xywh">
<code class="descclassname">ocrd.utils.</code><code class="descname">points_from_xywh</code><span class="sig-paren">(</span><em>box</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#points_from_xywh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.points_from_xywh" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a polygon representation from a rectangle described as a dict with keys x, y, w, h.</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.utils.xywh_from_points">
<code class="descclassname">ocrd.utils.</code><code class="descname">xywh_from_points</code><span class="sig-paren">(</span><em>points</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#xywh_from_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.xywh_from_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs an dict representing a rectangle with keys x, y, w, h</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.utils.polygon_from_points">
<code class="descclassname">ocrd.utils.</code><code class="descname">polygon_from_points</code><span class="sig-paren">(</span><em>points</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#polygon_from_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.polygon_from_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a numpy-compatible polygon from a page representation.</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.utils.is_string">
<code class="descclassname">ocrd.utils.</code><code class="descname">is_string</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#is_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.is_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocrd.utils.concat_padded">
<code class="descclassname">ocrd.utils.</code><code class="descname">concat_padded</code><span class="sig-paren">(</span><em>base</em>, <em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#concat_padded"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.concat_padded" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate string and zero-padded 4 digit number</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.utils.safe_filename">
<code class="descclassname">ocrd.utils.</code><code class="descname">safe_filename</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#safe_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.safe_filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ocrd.utils.is_local_filename">
<code class="descclassname">ocrd.utils.</code><code class="descname">is_local_filename</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#is_local_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.is_local_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether a url is a local filename.</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.utils.unzip_file_to_dir">
<code class="descclassname">ocrd.utils.</code><code class="descname">unzip_file_to_dir</code><span class="sig-paren">(</span><em>path_to_zip</em>, <em>output_directory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#unzip_file_to_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.unzip_file_to_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a ZIP archive to a directory</p>
</dd></dl>

<dl class="function">
<dt id="ocrd.utils.abspath">
<code class="descclassname">ocrd.utils.</code><code class="descname">abspath</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/utils.html#abspath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.utils.abspath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a full path to a file or file URL</p>
<p>See os.abspath</p>
</dd></dl>

</div>
<div class="section" id="module-ocrd.workspace">
<span id="ocrd-workspace-module"></span><h2>ocrd.workspace module<a class="headerlink" href="#module-ocrd.workspace" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocrd.workspace.Workspace">
<em class="property">class </em><code class="descclassname">ocrd.workspace.</code><code class="descname">Workspace</code><span class="sig-paren">(</span><em>resolver</em>, <em>directory</em>, <em>mets=None</em>, <em>mets_basename='mets.xml'</em>, <em>automatic_backup=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A workspace is a temporary directory set up for a processor. It’s the
interface to the METS/PAGE XML and delegates download and upload to the
Resolver.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>directory</strong> (<em>string</em>) – Folder to work in</li>
<li><strong>mets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">OcrdMets</span></code>) – OcrdMets representing this workspace. Loaded from ‘mets.xml’ if <code class="docutils literal notranslate"><span class="pre">None</span></code>.</li>
<li><strong>mets_basename</strong> (<em>string</em>) – Basename of the METS XML file. Default: Last URL segment of the mets_url.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocrd.workspace.Workspace.add_file">
<code class="descname">add_file</code><span class="sig-paren">(</span><em>file_grp</em>, <em>basename=None</em>, <em>content=None</em>, <em>local_filename=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.add_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.add_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an output file. Creates an <code class="xref py py-class docutils literal notranslate"><span class="pre">OcrdFile</span></code> to pass around and adds that to the
OcrdMets OUTPUT section.</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.download_file">
<code class="descname">download_file</code><span class="sig-paren">(</span><em>f</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.download_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.download_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a <a class="reference internal" href="ocrd.model.html#ocrd.model.ocrd_file.OcrdFile" title="ocrd.model.ocrd_file.OcrdFile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ocrd.model.ocrd_file.OcrdFile</span></code></a> to the workspace.</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.download_files_in_group">
<code class="descname">download_files_in_group</code><span class="sig-paren">(</span><em>file_grp</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.download_files_in_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.download_files_in_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Download all  the <a class="reference internal" href="ocrd.model.html#ocrd.model.ocrd_file.OcrdFile" title="ocrd.model.ocrd_file.OcrdFile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ocrd.model.ocrd_file.OcrdFile</span></code></a> in the file group given.</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.download_url">
<code class="descname">download_url</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.download_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.download_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a URL to the workspace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<em>string</em>) – URL to download to directory</li>
<li><strong>**kwargs</strong> – See <a class="reference internal" href="#ocrd.resolver.Resolver" title="ocrd.resolver.Resolver"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ocrd.resolver.Resolver</span></code></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The local filename of the downloaded file</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.move_file">
<code class="descname">move_file</code><span class="sig-paren">(</span><em>fobj</em>, <em>dst</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.move_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.move_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Move a fobj within the workspace</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.reload_mets">
<code class="descname">reload_mets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.reload_mets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.reload_mets" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload METS from disk.</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.resolve_image_as_pil">
<code class="descname">resolve_image_as_pil</code><span class="sig-paren">(</span><em>image_url</em>, <em>coords=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.resolve_image_as_pil"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.resolve_image_as_pil" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve an image URL to a PIL image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>coords</strong> (<em>list</em>) – Coordinates of the bounding box to cut from the image</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Image or region in image as PIL.Image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.resolve_image_exif">
<code class="descname">resolve_image_exif</code><span class="sig-paren">(</span><em>image_url</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.resolve_image_exif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.resolve_image_exif" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the EXIF metadata about an image URL as <code class="xref py py-class docutils literal notranslate"><span class="pre">OcrdExif</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image_url</strong> (<em>string</em>) – URL of image</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Return</dt>
<dd><code class="xref py py-class docutils literal notranslate"><span class="pre">OcrdExif</span></code></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace.Workspace.save_mets">
<code class="descname">save_mets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace.html#Workspace.save_mets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace.Workspace.save_mets" title="Permalink to this definition">¶</a></dt>
<dd><p>Write out the current state of the METS file.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocrd.workspace_backup">
<span id="ocrd-workspace-backup-module"></span><h2>ocrd.workspace_backup module<a class="headerlink" href="#module-ocrd.workspace_backup" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocrd.workspace_backup.WorkspaceBackup">
<em class="property">class </em><code class="descclassname">ocrd.workspace_backup.</code><code class="descname">WorkspaceBackup</code><span class="sig-paren">(</span><em>chksum</em>, <em>lastmod</em>, <em>size</em>, <em>mets_xml</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="classmethod">
<dt id="ocrd.workspace_backup.WorkspaceBackup.from_path">
<em class="property">classmethod </em><code class="descname">from_path</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackup.from_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackup.from_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocrd.workspace_backup.WorkspaceBackupManager">
<em class="property">class </em><code class="descclassname">ocrd.workspace_backup.</code><code class="descname">WorkspaceBackupManager</code><span class="sig-paren">(</span><em>workspace</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackupManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackupManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages backups of a workspace in a directory BACKUP_DIR</p>
<dl class="method">
<dt id="ocrd.workspace_backup.WorkspaceBackupManager.add">
<code class="descname">add</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackupManager.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackupManager.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a backup in &lt;self.backup_directory&gt;</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace_backup.WorkspaceBackupManager.list">
<code class="descname">list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackupManager.list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackupManager.list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all backups as WorkspaceBackup objects, sorted descending by lastmod.</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace_backup.WorkspaceBackupManager.restore">
<code class="descname">restore</code><span class="sig-paren">(</span><em>chksum</em>, <em>choose_first=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackupManager.restore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackupManager.restore" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore mets.xml to previous state</p>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace_backup.WorkspaceBackupManager.undo">
<code class="descname">undo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_backup.html#WorkspaceBackupManager.undo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_backup.WorkspaceBackupManager.undo" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore to last version</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocrd.workspace_bagger">
<span id="ocrd-workspace-bagger-module"></span><h2>ocrd.workspace_bagger module<a class="headerlink" href="#module-ocrd.workspace_bagger" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocrd.workspace_bagger.WorkspaceBagger">
<em class="property">class </em><code class="descclassname">ocrd.workspace_bagger.</code><code class="descname">WorkspaceBagger</code><span class="sig-paren">(</span><em>resolver</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_bagger.html#WorkspaceBagger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_bagger.WorkspaceBagger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Serialize/De-serialize from OCRD-ZIP to workspace and back.</p>
<dl class="method">
<dt id="ocrd.workspace_bagger.WorkspaceBagger.bag">
<code class="descname">bag</code><span class="sig-paren">(</span><em>workspace</em>, <em>ocrd_identifier</em>, <em>dest=None</em>, <em>ocrd_mets='mets.xml'</em>, <em>ocrd_manifestation_depth='full'</em>, <em>ocrd_base_version_checksum=None</em>, <em>processes=1</em>, <em>skip_zip=False</em>, <em>in_place=False</em>, <em>tag_files=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_bagger.html#WorkspaceBagger.bag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_bagger.WorkspaceBagger.bag" title="Permalink to this definition">¶</a></dt>
<dd><p>Bag a workspace</p>
<p>See <a class="reference external" href="https://ocr-d.github.com/ocrd_zip#packing-a-workspace-as-ocrd-zip">https://ocr-d.github.com/ocrd_zip#packing-a-workspace-as-ocrd-zip</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>workspace</strong> (<em>ocrd.Workspace</em>) – workspace to bag</li>
<li><strong>ord_identifier</strong> (<em>string</em>) – Ocrd-Identifier in bag-info.txt</li>
<li><strong>dest</strong> (<em>string</em>) – Path of the generated OCRD-ZIP.</li>
<li><strong>ord_mets</strong> (<em>string</em>) – Ocrd-Mets in bag-info.txt</li>
<li><strong>ord_manifestation_depth</strong> (<em>string</em>) – Ocrd-Manifestation-Depth in bag-info.txt</li>
<li><strong>ord_base_version_checksum</strong> (<em>string</em>) – Ocrd-Base-Version-Checksum in bag-info.txt</li>
<li><strong>processes</strong> (<em>integer</em>) – Number of parallel processes checksumming</li>
<li><strong>skip_zip</strong> (<em>boolean</em>) – Whether to leave directory unzipped</li>
<li><strong>in_place</strong> (<em>boolean</em>) – Whether to <strong>replace</strong> the workspace with its BagIt variant</li>
<li><strong>tag_files</strong> (<em>list&lt;string&gt;</em>) – Path names of additional tag files to be bagged at the root of the bag</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace_bagger.WorkspaceBagger.spill">
<code class="descname">spill</code><span class="sig-paren">(</span><em>src</em>, <em>dest</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_bagger.html#WorkspaceBagger.spill"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_bagger.WorkspaceBagger.spill" title="Permalink to this definition">¶</a></dt>
<dd><p>Spill a workspace, i.e. unpack it and turn it into a workspace.</p>
<p>See <a class="reference external" href="https://ocr-d.github.com/ocrd_zip#unpacking-ocrd-zip-to-a-workspace">https://ocr-d.github.com/ocrd_zip#unpacking-ocrd-zip-to-a-workspace</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>src</strong> (<em>string</em>) – Path to OCRD-ZIP</li>
<li><strong>dest</strong> (<em>string</em>) – Path to directory to unpack data folder to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocrd.workspace_bagger.WorkspaceBagger.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><em>bag</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ocrd/workspace_bagger.html#WorkspaceBagger.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd.workspace_bagger.WorkspaceBagger.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate conformance with BagIt and OCR-D bagit profile.</p>
<dl class="docutils">
<dt>See:</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="https://ocr-d.github.io/ocrd_zip">https://ocr-d.github.io/ocrd_zip</a></li>
<li><a class="reference external" href="https://ocr-d.github.io/bagit-profile.json">https://ocr-d.github.io/bagit-profile.json</a></li>
<li><a class="reference external" href="https://ocr-d.github.io/bagit-profile.yml">https://ocr-d.github.io/bagit-profile.yml</a></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ocrd">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ocrd" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pyocrd</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=OCR-D&repo=pyocrd&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a href="https://travis-ci.org/OCR-D/pyocrd">
    <img
        alt="https://secure.travis-ci.org/OCR-D/pyocrd.svg?branch=master"
        src="https://secure.travis-ci.org/OCR-D/pyocrd.svg?branch=master"
    />
</a>
</p>


<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ocrd package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">ocrd</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">ocrd</a></li>
      <li>Next: <a href="ocrd.cli.html" title="next chapter">ocrd.cli package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Kay Wuerzner, Konstantin Baierer.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/api/ocrd.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>